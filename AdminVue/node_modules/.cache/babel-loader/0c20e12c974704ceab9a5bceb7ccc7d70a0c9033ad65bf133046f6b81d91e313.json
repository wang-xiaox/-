{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState } from 'vuex';\nimport { getLock, setLock } from '@/utils/lock';\nimport elAsside from \"../../components/layout/aside\";\nimport elMain from \"../../components/layout/main\";\nimport elHeader from \"../../components/layout/header\";\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      lock: 0\n    };\n  },\n  components: {\n    elAsside,\n    elMain,\n    elHeader\n  },\n  computed: {\n    ...mapState({\n      activeMenuArrary: state => state.menu.activeMenuArrary,\n      activeMenu: state => state.menu.activeMenu\n    })\n  },\n  methods: {\n    leftScroll() {\n      var container = document.getElementById('menu');\n      // 向左滚动100像素\n      container.scrollLeft -= 100;\n    },\n    rightScroll() {\n      var container = document.getElementById('menu');\n      // 向右滚动100像素\n      container.scrollLeft += 100;\n    },\n    openMenu(url) {\n      if (this.activeMenu != url) {\n        this.$router.push({\n          path: url\n        });\n        this.$store.commit('menu/setActiveMenu', url);\n      }\n    },\n    closeMenu(url) {\n      var index = this.activeMenuArrary.length - 1;\n      for (let i = 0; i < this.activeMenuArrary.length; i++) {\n        if (this.activeMenuArrary[i].url == url) {\n          index = i;\n          break;\n        }\n      }\n      if (this.activeMenu == url) {\n        this.$router.push({\n          path: this.activeMenuArrary[index - 1].url\n        });\n        this.$store.commit('menu/setActiveMenu', this.activeMenuArrary[index - 1].url);\n      }\n      this.$store.commit('menu/reduceActiveMenu', index);\n      this.$bus.$emit(\"clearKeepAlive\", url);\n    },\n    unlock() {\n      getLock();\n      this.$bus.$emit('lock', 0);\n    }\n  },\n  created() {},\n  mounted() {\n    // console.clear()\n    this.$nextTick(() => {\n      this.lock = getLock();\n      console.log(this.lock);\n      this.$bus.$on('lock', res => {\n        setLock(res);\n        this.lock = res;\n      });\n    });\n  }\n};","map":{"version":3,"names":["mapState","getLock","setLock","elAsside","elMain","elHeader","name","data","lock","components","computed","activeMenuArrary","state","menu","activeMenu","methods","leftScroll","container","document","getElementById","scrollLeft","rightScroll","openMenu","url","$router","push","path","$store","commit","closeMenu","index","length","i","$bus","$emit","unlock","created","mounted","$nextTick","console","log","$on","res"],"sources":["src/views/layout/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container v-if=\"lock == 1\">\r\n      <el-asside></el-asside>\r\n      <el-container>\r\n        <el-header></el-header>\r\n        <div class=\"main-menu\">\r\n          <div class=\"scroll-left\" @click=\"leftScroll()\">\r\n            <i class=\"el-icon-arrow-left\"></i>\r\n          </div>\r\n          <div class=\"menu\" id=\"menu\">\r\n            <div class=\"menu-item\" v-for=\"(item,index) in activeMenuArrary\" :key=\"index\" @click=\"openMenu(item.url)\">\r\n              <span :class=\"item.url == activeMenu?'active':''\" class=\"menu-name\">{{item.name}}</span>\r\n              <i v-if=\"item.url != '/index'\" class=\"menu-icon el-icon-close\" @click.stop=\"closeMenu(item.url)\"></i>\r\n            </div>\r\n          </div>\r\n          <div class=\"scroll-right\" @click=\"rightScroll()\">\r\n            <i class=\"el-icon-arrow-right\"></i>\r\n          </div>\r\n        </div>\r\n        <el-main></el-main>\r\n      </el-container>\r\n    </el-container>\r\n    <el-container v-if=\"lock == 0\">\r\n    <div class=\"lock\" @click=\"unlock\">\r\n\r\n    </div>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { mapState } from 'vuex'\r\n  import { getLock,setLock } from '@/utils/lock'\r\n  import elAsside from \"../../components/layout/aside\"\r\n  import elMain from \"../../components/layout/main\"\r\n  import elHeader from \"../../components/layout/header\"\r\n\r\n  export default {\r\n    name: \"index\",\r\n    data() {\r\n      return{\r\n        lock: 0\r\n      }\r\n    },\r\n    components:{\r\n      elAsside,\r\n      elMain,\r\n      elHeader\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n          activeMenuArrary: state => state.menu.activeMenuArrary,\r\n          activeMenu: state => state.menu.activeMenu\r\n      })\r\n    },\r\n    methods: {\r\n      leftScroll() {\r\n        var container = document.getElementById('menu');\r\n        // 向左滚动100像素\r\n        container.scrollLeft -= 100;\r\n      },\r\n      rightScroll() {\r\n        var container = document.getElementById('menu');\r\n        // 向右滚动100像素\r\n        container.scrollLeft += 100;\r\n      },\r\n      openMenu(url) {\r\n        if (this.activeMenu != url) {\r\n          this.$router.push({\r\n            path: url,\r\n          })\r\n          this.$store.commit('menu/setActiveMenu', url)\r\n        }\r\n      },\r\n      closeMenu(url) {\r\n        var index = this.activeMenuArrary.length - 1\r\n        for(let i = 0;i < this.activeMenuArrary.length;i++) {\r\n          if(this.activeMenuArrary[i].url == url) {\r\n            index = i;\r\n            break;\r\n          }\r\n        }\r\n        if(this.activeMenu == url) {\r\n          this.$router.push({\r\n            path: this.activeMenuArrary[index-1].url,\r\n          })\r\n          this.$store.commit('menu/setActiveMenu', this.activeMenuArrary[index-1].url)\r\n        }\r\n        this.$store.commit('menu/reduceActiveMenu', index)\r\n        this.$bus.$emit(\"clearKeepAlive\", url);\r\n      },\r\n      unlock() {\r\n        getLock()\r\n        this.$bus.$emit('lock', 0)\r\n      }\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      // console.clear()\r\n      this.$nextTick(() => {\r\n        this.lock = getLock()\r\n        console.log(this.lock)\r\n        this.$bus.$on('lock', res=>{\r\n          setLock(res)\r\n          this.lock = res\r\n        })\r\n      })\r\n      \r\n    }\r\n }\r\n</script>\r\n\r\n<style lang=scss scoped>\r\n    .common-layout >>> .el-menu-item {\r\n        min-width: 0;\r\n    }\r\n    .main-menu {\r\n      width: 100%;\r\n      height: 25px;\r\n      border-top: 1px solid #ECECF1;\r\n      background-color: #ffffff;\r\n      display: flex;\r\n      flex-direction: row;\r\n    }\r\n    .menu {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      height: 100%;\r\n      width: calc(100% - 60px);\r\n      overflow: scroll;\r\n      flex-grow: 0;\r\n      flex-basis: auto\r\n    }\r\n    .scroll-left {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 30px;\r\n      height: 100%;\r\n      cursor: pointer;\r\n    }\r\n    .menu::-webkit-scrollbar {\r\n      width: 0px;\r\n      height: 0px;\r\n    }\r\n    .scroll-right {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 30px;\r\n      height: 100%;\r\n      cursor: pointer;\r\n    }\r\n    .menu-item {\r\n      width: 100px;\r\n      height: 100%;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      border-left: 1px solid #E5E5E5;\r\n      border-right: 1px solid #E5E5E5;\r\n      border-bottom: 1px solid #E5E5E5;\r\n      cursor: pointer;\r\n      background-color: #F5F7FA;\r\n      flex-shrink: 0;\r\n    }\r\n    .menu-name {\r\n      margin-left:10px;\r\n      font-size: 12px;\r\n      cursor: pointer;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      font-family: '黑体';\r\n    }\r\n    .active {\r\n      color: #66B1FF;\r\n    }\r\n    .menu-icon {\r\n      cursor: pointer;\r\n      font-size: 12px;\r\n    }\r\n    .lock {\r\n      width: 100%;\r\n      height: 100vh;\r\n    }\r\n</style>"],"mappings":";AAgCA,SAAAA,QAAA;AACA,SAAAC,OAAA,EAAAC,OAAA;AACA,OAAAC,QAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;IACA;EACA;EACAC,UAAA;IACAN,QAAA;IACAC,MAAA;IACAC;EACA;EACAK,QAAA;IACA,GAAAV,QAAA;MACAW,gBAAA,EAAAC,KAAA,IAAAA,KAAA,CAAAC,IAAA,CAAAF,gBAAA;MACAG,UAAA,EAAAF,KAAA,IAAAA,KAAA,CAAAC,IAAA,CAAAC;IACA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,IAAAC,SAAA,GAAAC,QAAA,CAAAC,cAAA;MACA;MACAF,SAAA,CAAAG,UAAA;IACA;IACAC,YAAA;MACA,IAAAJ,SAAA,GAAAC,QAAA,CAAAC,cAAA;MACA;MACAF,SAAA,CAAAG,UAAA;IACA;IACAE,SAAAC,GAAA;MACA,SAAAT,UAAA,IAAAS,GAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UACAC,IAAA,EAAAH;QACA;QACA,KAAAI,MAAA,CAAAC,MAAA,uBAAAL,GAAA;MACA;IACA;IACAM,UAAAN,GAAA;MACA,IAAAO,KAAA,QAAAnB,gBAAA,CAAAoB,MAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAArB,gBAAA,CAAAoB,MAAA,EAAAC,CAAA;QACA,SAAArB,gBAAA,CAAAqB,CAAA,EAAAT,GAAA,IAAAA,GAAA;UACAO,KAAA,GAAAE,CAAA;UACA;QACA;MACA;MACA,SAAAlB,UAAA,IAAAS,GAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UACAC,IAAA,OAAAf,gBAAA,CAAAmB,KAAA,MAAAP;QACA;QACA,KAAAI,MAAA,CAAAC,MAAA,4BAAAjB,gBAAA,CAAAmB,KAAA,MAAAP,GAAA;MACA;MACA,KAAAI,MAAA,CAAAC,MAAA,0BAAAE,KAAA;MACA,KAAAG,IAAA,CAAAC,KAAA,mBAAAX,GAAA;IACA;IACAY,OAAA;MACAlC,OAAA;MACA,KAAAgC,IAAA,CAAAC,KAAA;IACA;EACA;EACAE,QAAA,GAEA;EACAC,QAAA;IACA;IACA,KAAAC,SAAA;MACA,KAAA9B,IAAA,GAAAP,OAAA;MACAsC,OAAA,CAAAC,GAAA,MAAAhC,IAAA;MACA,KAAAyB,IAAA,CAAAQ,GAAA,SAAAC,GAAA;QACAxC,OAAA,CAAAwC,GAAA;QACA,KAAAlC,IAAA,GAAAkC,GAAA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}