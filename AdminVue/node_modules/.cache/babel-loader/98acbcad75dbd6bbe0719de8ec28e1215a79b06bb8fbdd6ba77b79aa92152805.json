{"ast":null,"code":"import { getUser, editUser } from '../../../api/api';\nexport default {\n  data() {\n    var checkPhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请输入联系电话'));\n      } else {\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/;\n        if (reg.test(value)) {\n          callback();\n        } else {\n          return callback(new Error('请输入正确的联系电话'));\n        }\n      }\n    };\n    return {\n      user: {\n        avatar: \"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fb4a87154-18b6-4163-ac80-f4dc4bf58d09%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1693364028&t=c518c6c4a6ee2009b961f712a57c211f\"\n      },\n      avatar: [\"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fb4a87154-18b6-4163-ac80-f4dc4bf58d09%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1693364028&t=c518c6c4a6ee2009b961f712a57c211f\"],\n      rules: {\n        userName: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请输入邮箱地址',\n          trigger: 'blur'\n        }, {\n          type: 'email',\n          message: '请输入正确的邮箱地址',\n          trigger: 'blur'\n        }],\n        tel: [{\n          required: true,\n          validator: checkPhone,\n          message: '请输入正确的联系电话',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submit() {\n      this.$refs[\"ruleForm\"].validate(valid => {\n        if (valid) {\n          editUser(this.form).then(res => {\n            if (res.code == 1000) {\n              this.$notify.success({\n                title: '成功',\n                message: \"保存成功\"\n              });\n              this.handleClose();\n            } else {\n              this.$notify.error({\n                title: '错误',\n                message: res.message\n              });\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    checkPhone(rule, value, callback) {\n      if (!/^1[34578]\\d{9}$/.test(value)) {\n        callback(new Error(\"请输入正确的手机号码!\"));\n      }\n    },\n    getUserInfo() {\n      getUser().then(res => {\n        if (res.code == 1000) {\n          this.user = res.data;\n          this.user.sex = res.data.sex + \"\";\n          this.avatar[0] = this.user.avatar;\n        } else {\n          this.$notify.error({\n            title: '错误',\n            message: res.message\n          });\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {\n    this.getUserInfo();\n  }\n};","map":{"version":3,"names":["getUser","editUser","data","checkPhone","rule","value","callback","Error","reg","test","user","avatar","rules","userName","required","message","trigger","email","type","tel","validator","methods","submit","$refs","validate","valid","form","then","res","code","$notify","success","title","handleClose","error","getUserInfo","sex","created","mounted"],"sources":["src/views/system/center/center.vue"],"sourcesContent":["<template>\r\n  <div class=\"center\">\r\n    <el-card class=\"box-card\">\r\n        <div class=\"content\">\r\n            <div class=\"master\">\r\n              <el-form style=\"margin-right:20px\" :model=\"user\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"140px\">\r\n                <el-form-item label=\"登陆账号\" prop=\"loginAccount\">\r\n                  <el-input size=\"mini\" disabled v-model=\"user.loginAccount\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"用户名\" prop=\"userName\">\r\n                  <el-input size=\"mini\" v-model=\"user.userName\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                  <el-input size=\"mini\" v-model=\"user.email\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"联系电话\" prop=\"tel\">\r\n                  <el-input size=\"mini\" v-model=\"user.tel\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别\" prop=\"tel\">\r\n                  <el-radio-group v-model=\"user.sex\">\r\n                    <el-radio label=\"0\">男</el-radio>\r\n                    <el-radio label=\"1\">女</el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"登陆IP\" prop=\"loginIp\">\r\n                  <el-input size=\"mini\" disabled v-model=\"user.loginIp\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"登陆时间\" prop=\"loginDate\">\r\n                  <el-input size=\"mini\" disabled v-model=\"user.loginDate\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"上次修改密码时间\" prop=\"pwdUpdateDate\">\r\n                  <el-input size=\"mini\" disabled v-model=\"user.pwdUpdateDate\"></el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <div class=\"submit\">\r\n                  <el-button type=\"primary\" plain size=\"mini\" @click=\"submit\">保存</el-button>\r\n              </div>\r\n            </div>\r\n            <div class=\"slave\">\r\n                <div class=\"img\">\r\n                  <el-image \r\n                    style=\"width: 300px; height: 300px;overflow: hidden;border-radius: 50%;\"\r\n                    :src=\"user.avatar\" \r\n                    :preview-src-list=\"avatar\">\r\n                  </el-image>\r\n                </div>\r\n                <div class=\"btns\">\r\n                  <div>\r\n                    <el-button size=\"mini\" icon=\"el-icon-picture-outline-round\">修改头像</el-button>\r\n                  </div>\r\n                  <div style=\"margin-top:15px\">\r\n                    <el-button size=\"mini\" icon=\"el-icon-key\">修改密码</el-button>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {getUser,editUser} from '../../../api/api' \r\n  export default {\r\n    data() {\r\n      var checkPhone = (rule, value, callback) => {\r\n          if (!value) {\r\n              return callback(new Error('请输入联系电话'));\r\n          } else {\r\n              const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\r\n              if (reg.test(value)) {\r\n                  callback();\r\n              } else {\r\n                  return callback(new Error('请输入正确的联系电话'));\r\n              }\r\n          }\r\n      };\r\n      return{\r\n        user: {\r\n          avatar: \"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fb4a87154-18b6-4163-ac80-f4dc4bf58d09%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1693364028&t=c518c6c4a6ee2009b961f712a57c211f\"\r\n        },\r\n        avatar: [\"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2Fb4a87154-18b6-4163-ac80-f4dc4bf58d09%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1693364028&t=c518c6c4a6ee2009b961f712a57c211f\"],\r\n        rules: {\r\n          userName: [\r\n            { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          ],\r\n          email: [\r\n            { required: true, message: '请输入邮箱地址', trigger: 'blur' },\r\n            { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\r\n          ],\r\n          tel: [\r\n            { required: true, validator:checkPhone, message: '请输入正确的联系电话', trigger: 'blur' },\r\n          ],\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      submit() {\r\n        this.$refs[\"ruleForm\"].validate((valid) => {\r\n          if (valid) {\r\n            editUser(this.form).then(res => {\r\n              if(res.code == 1000) {\r\n                this.$notify.success({\r\n                  title: '成功',\r\n                  message: \"保存成功\"\r\n                });\r\n                this.handleClose();\r\n              } else {\r\n                this.$notify.error({\r\n                  title: '错误',\r\n                  message: res.message\r\n                });\r\n              }\r\n            })\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      checkPhone(rule, value, callback) {\r\n        if (!/^1[34578]\\d{9}$/.test(value)) {\r\n          callback(new Error(\"请输入正确的手机号码!\"));\r\n        }\r\n      },\r\n      getUserInfo() {\r\n        getUser().then(res => {\r\n            if(res.code == 1000) {\r\n              this.user = res.data\r\n              this.user.sex = res.data.sex + \"\"\r\n              this.avatar[0] = this.user.avatar\r\n            } else {\r\n              this.$notify.error({\r\n              title: '错误',\r\n              message: res.message\r\n            });\r\n          }\r\n        })\r\n      },\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      this.getUserInfo()\r\n    }\r\n }\r\n</script>\r\n\r\n<style lang=scss scoped>\r\n  .content {\r\n      width: 100%;\r\n      height: 550px;\r\n      display: flex;\r\n      flex-direction: row;\r\n      font-family: \"黑体\";\r\n  }\r\n  .master {\r\n      width: 60%;\r\n      border-right: 1px solid #E5E5E5;\r\n  }\r\n  .submit {\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n  .slave {\r\n      width: 40%;\r\n  }\r\n  .img {\r\n      width: 100%;\r\n      height: 70%;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n  }\r\n  .btns {\r\n      width: 100%;\r\n      height: 30%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n  }\r\n</style>"],"mappings":"AA6DA,SAAAA,OAAA,EAAAC,QAAA;AACA;EACAC,KAAA;IACA,IAAAC,UAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,KAAAD,KAAA;QACA,OAAAC,QAAA,KAAAC,KAAA;MACA;QACA,MAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,CAAAJ,KAAA;UACAC,QAAA;QACA;UACA,OAAAA,QAAA,KAAAC,KAAA;QACA;MACA;IACA;IACA;MACAG,IAAA;QACAC,MAAA;MACA;MACAA,MAAA;MACAC,KAAA;QACAC,QAAA,GACA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAC,KAAA,GACA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAE,IAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAG,GAAA,GACA;UAAAL,QAAA;UAAAM,SAAA,EAAAjB,UAAA;UAAAY,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAK,OAAA;IACAC,OAAA;MACA,KAAAC,KAAA,aAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAxB,QAAA,MAAAyB,IAAA,EAAAC,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA;cACA,KAAAC,OAAA,CAAAC,OAAA;gBACAC,KAAA;gBACAjB,OAAA;cACA;cACA,KAAAkB,WAAA;YACA;cACA,KAAAH,OAAA,CAAAI,KAAA;gBACAF,KAAA;gBACAjB,OAAA,EAAAa,GAAA,CAAAb;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAZ,WAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,uBAAAG,IAAA,CAAAJ,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA;IACA;IACA4B,YAAA;MACAnC,OAAA,GAAA2B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAnB,IAAA,GAAAkB,GAAA,CAAA1B,IAAA;UACA,KAAAQ,IAAA,CAAA0B,GAAA,GAAAR,GAAA,CAAA1B,IAAA,CAAAkC,GAAA;UACA,KAAAzB,MAAA,WAAAD,IAAA,CAAAC,MAAA;QACA;UACA,KAAAmB,OAAA,CAAAI,KAAA;YACAF,KAAA;YACAjB,OAAA,EAAAa,GAAA,CAAAb;UACA;QACA;MACA;IACA;EACA;EACAsB,QAAA,GAEA;EACAC,QAAA;IACA,KAAAH,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}