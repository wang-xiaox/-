{"ast":null,"code":"import axios from 'axios';\nimport { Message, MessageBox } from 'element-ui'; //导入element-ui组件库\nimport { el } from 'element-plus/es/locale';\n\n// 创建axios的对象\nconst instance = axios.create({\n  baseURL: \"http://localhost:8080\",\n  //配置固定域名\n  timeout: 5000\n});\n\n// 请求拦截\n// 所有的网络请求都会走这个方法,可以在请求添加自定义内容\ninstance.interceptors.request.use(function (config) {\n  if (config.method === 'post') {\n    config.data = {\n      ...config.data,\n      _t: Date.parse(new Date()) / 1000 // 时间戳\n    };\n  } else if (config.method === 'get') {\n    config.params = {\n      random: Math.random(),\n      // 随机数\n      ...config.params\n    };\n  }\n  config.headers.token = '123456'; // 请求头添加token值\n  config.headers.info = 'lxy'; //请求头添加info值\n  return config;\n}, function (err) {\n  return Promise.request(err);\n});\n\n// 响应拦截\n// 此处可以根据服务器返回的状态码做相应的数据\ninstance.interceptors.response.use(function (response) {\n  const res = response;\n  if (res.status === 500) {\n    MessageBox.alert('系统未登录，请重新登录', '错误', {\n      confirmButtonText: '确定',\n      type: 'error'\n    }).then(() => {\n      store.dispatch('FedLogOut').then(() => {\n        location.reload();\n      });\n    });\n    return Promise.reject('error');\n  } else if (res.errno === 502) {\n    MessageBox.alert('系统内部错误，请联系管理员维护', '错误', {\n      confirmButtonText: '确定',\n      type: 'error'\n    });\n    return Promise.reject('error');\n  } else {\n    return res.data;\n  }\n}, function (err) {\n  return Promise.request(err);\n});\n\n// 封装get和post请求\nexport function get(url, params) {\n  return instance.get(url, {\n    params\n  });\n}\nexport function post(url, data) {\n  return instance.post(url, data);\n}\nexport default instance;","map":{"version":3,"names":["axios","Message","MessageBox","el","instance","create","baseURL","timeout","interceptors","request","use","config","method","data","_t","Date","parse","params","random","Math","headers","token","info","err","Promise","response","res","status","alert","confirmButtonText","type","then","store","dispatch","location","reload","reject","errno","get","url","post"],"sources":["D:/vue_project/back_stage_front/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport { Message, MessageBox } from 'element-ui'  //导入element-ui组件库\r\nimport { el } from 'element-plus/es/locale'\r\n \r\n// 创建axios的对象\r\nconst instance = axios.create({\r\n    baseURL: \"http://localhost:8080\",  //配置固定域名\r\n    timeout: 5000\r\n})\r\n \r\n// 请求拦截\r\n// 所有的网络请求都会走这个方法,可以在请求添加自定义内容\r\ninstance.interceptors.request.use(\r\n    function (config) {\r\n        if (config.method === 'post') {\r\n            config.data = {\r\n              ...config.data,\r\n              _t: Date.parse(new Date()) / 1000 // 时间戳\r\n            }\r\n        } else if (config.method === 'get') {\r\n            config.params = {\r\n              random: Math.random(), // 随机数\r\n              ...config.params\r\n            }\r\n        }\r\n        config.headers.token = '123456' // 请求头添加token值\r\n        config.headers.info = 'lxy'  //请求头添加info值\r\n        return config\r\n    },\r\n    function (err) {\r\n        return Promise.request(err)\r\n    }\r\n)\r\n \r\n// 响应拦截\r\n// 此处可以根据服务器返回的状态码做相应的数据\r\ninstance.interceptors.response.use(\r\n    function (response) {\r\n        const res = response\r\n        if (res.status === 500) {\r\n            MessageBox.alert('系统未登录，请重新登录', '错误', {\r\n                confirmButtonText: '确定',\r\n                type: 'error'\r\n            }).then(() => {\r\n                store.dispatch('FedLogOut').then(() => {\r\n                    location.reload()\r\n                })\r\n            })\r\n            return Promise.reject('error')\r\n        } else if (res.errno === 502) {\r\n            MessageBox.alert('系统内部错误，请联系管理员维护', '错误', {\r\n                confirmButtonText: '确定',\r\n                type: 'error'\r\n            })\r\n            return Promise.reject('error')\r\n        } else {\r\n            return res.data\r\n        }\r\n    },\r\n    function (err) {\r\n        return Promise.request(err)\r\n    }\r\n)\r\n \r\n// 封装get和post请求\r\nexport function get(url, params) {\r\n    return instance.get(url, {params})\r\n}\r\n \r\nexport function post(url, data) {\r\n    return instance.post(url, data)\r\n}\r\n \r\nexport default instance;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,EAAEC,UAAU,QAAQ,YAAY,EAAE;AAClD,SAASC,EAAE,QAAQ,wBAAwB;;AAE3C;AACA,MAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAM,CAAC;EAC1BC,OAAO,EAAE,uBAAuB;EAAG;EACnCC,OAAO,EAAE;AACb,CAAC,CAAC;;AAEF;AACA;AACAH,QAAQ,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC7B,UAAUC,MAAM,EAAE;EACd,IAAIA,MAAM,CAACC,MAAM,KAAK,MAAM,EAAE;IAC1BD,MAAM,CAACE,IAAI,GAAG;MACZ,GAAGF,MAAM,CAACE,IAAI;MACdC,EAAE,EAAEC,IAAI,CAACC,KAAK,CAAC,IAAID,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC;IACpC,CAAC;EACL,CAAC,MAAM,IAAIJ,MAAM,CAACC,MAAM,KAAK,KAAK,EAAE;IAChCD,MAAM,CAACM,MAAM,GAAG;MACdC,MAAM,EAAEC,IAAI,CAACD,MAAM,EAAE;MAAE;MACvB,GAAGP,MAAM,CAACM;IACZ,CAAC;EACL;EACAN,MAAM,CAACS,OAAO,CAACC,KAAK,GAAG,QAAQ,EAAC;EAChCV,MAAM,CAACS,OAAO,CAACE,IAAI,GAAG,KAAK,EAAE;EAC7B,OAAOX,MAAM;AACjB,CAAC,EACD,UAAUY,GAAG,EAAE;EACX,OAAOC,OAAO,CAACf,OAAO,CAACc,GAAG,CAAC;AAC/B,CAAC,CACJ;;AAED;AACA;AACAnB,QAAQ,CAACI,YAAY,CAACiB,QAAQ,CAACf,GAAG,CAC9B,UAAUe,QAAQ,EAAE;EAChB,MAAMC,GAAG,GAAGD,QAAQ;EACpB,IAAIC,GAAG,CAACC,MAAM,KAAK,GAAG,EAAE;IACpBzB,UAAU,CAAC0B,KAAK,CAAC,aAAa,EAAE,IAAI,EAAE;MAClCC,iBAAiB,EAAE,IAAI;MACvBC,IAAI,EAAE;IACV,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;MACVC,KAAK,CAACC,QAAQ,CAAC,WAAW,CAAC,CAACF,IAAI,CAAC,MAAM;QACnCG,QAAQ,CAACC,MAAM,EAAE;MACrB,CAAC,CAAC;IACN,CAAC,CAAC;IACF,OAAOX,OAAO,CAACY,MAAM,CAAC,OAAO,CAAC;EAClC,CAAC,MAAM,IAAIV,GAAG,CAACW,KAAK,KAAK,GAAG,EAAE;IAC1BnC,UAAU,CAAC0B,KAAK,CAAC,iBAAiB,EAAE,IAAI,EAAE;MACtCC,iBAAiB,EAAE,IAAI;MACvBC,IAAI,EAAE;IACV,CAAC,CAAC;IACF,OAAON,OAAO,CAACY,MAAM,CAAC,OAAO,CAAC;EAClC,CAAC,MAAM;IACH,OAAOV,GAAG,CAACb,IAAI;EACnB;AACJ,CAAC,EACD,UAAUU,GAAG,EAAE;EACX,OAAOC,OAAO,CAACf,OAAO,CAACc,GAAG,CAAC;AAC/B,CAAC,CACJ;;AAED;AACA,OAAO,SAASe,GAAGA,CAACC,GAAG,EAAEtB,MAAM,EAAE;EAC7B,OAAOb,QAAQ,CAACkC,GAAG,CAACC,GAAG,EAAE;IAACtB;EAAM,CAAC,CAAC;AACtC;AAEA,OAAO,SAASuB,IAAIA,CAACD,GAAG,EAAE1B,IAAI,EAAE;EAC5B,OAAOT,QAAQ,CAACoC,IAAI,CAACD,GAAG,EAAE1B,IAAI,CAAC;AACnC;AAEA,eAAeT,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}