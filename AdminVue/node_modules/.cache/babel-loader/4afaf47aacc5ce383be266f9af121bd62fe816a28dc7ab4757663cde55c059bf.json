{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getMenuByUser } from '@/api/api';\nimport { el } from 'element-plus/es/locale';\nconst state = {\n  activeMenuArrary: [{\n    \"name\": \"首页\",\n    \"url\": \"/index\"\n  }],\n  activeMenu: \"/index\",\n  menus: [],\n  routes: [],\n  displayMenus: [],\n  btnMenus: []\n};\nconst getters = {\n  getMenu(state) {\n    return state.menu;\n  },\n  getRoutes(state) {\n    return state.routes;\n  },\n  getDisplayMenus(state) {\n    return state.displayMenus;\n  },\n  getBtnMenus(state) {\n    return state.btnMenus;\n  }\n};\nconst mutations = {\n  setActiveMenu(state, menu) {\n    state.activeMenu = menu;\n  },\n  addActiveMenu(state, menu) {\n    state.activeMenuArrary.push(menu);\n  },\n  reduceActiveMenu(state, i) {\n    state.activeMenuArrary.splice(i, 1);\n  },\n  setMenus(state, menus) {\n    state.menus = menus;\n  },\n  setRoutes(state, routes) {\n    state.routes = routes;\n  },\n  setDisplayMenus(state, menus) {\n    state.displayMenus = menus;\n  },\n  setBtnMenus(state, btn) {\n    state.btnMenus = btn;\n  }\n};\nconst actions = {\n  generateRoutes({\n    commit\n  }) {\n    return new Promise(resolve => {\n      //根据用户获取菜单权限\n      getMenuByUser().then(res => {\n        if (res.code == 1000) {\n          var data = res.data;\n          commit(\"setMenus\", data);\n          //开始组装路由信息\n          var routes = filterRoutes(data);\n          commit(\"setRoutes\", routes);\n          //遍历获取首页左侧菜单\n          var display = filterMenus(data);\n          commit(\"displayMenus\", display);\n          //\n          resolve(routes);\n        }\n      });\n    });\n  }\n};\nfunction filterMenus(menus) {\n  var menu = [];\n  menus.forEach(item => {\n    //遍历一级菜单或目录\n    if (item.menuType != 2 && visible == 0 && !item.parents) {\n      //一级菜单去找自己的下级\n      item.child = [];\n      if (item.menuType == 0) {\n        filterChildMenus(item, menus);\n      }\n      menu.push(item);\n    }\n  });\n}\nfunction filterChildMenus(menu, menus) {\n  menu.child = [];\n  menus.forEach(item => {\n    if (menu.id == item.parentId) {\n      if (item.menuType == 0) {\n        filterChildMenus(item, menus);\n        menu.child.push(item);\n      } else if (item.menuType == 1) {\n        menu.child.push(item);\n      }\n    }\n  });\n}\nfunction filterRoutes(menus) {\n  var routes = [];\n  var root = {\n    path: \"\",\n    name: 'main',\n    component: main,\n    redirect: '',\n    children: []\n  };\n  var children = [];\n  //遍历出路由\n  menus.forEach(item => {\n    //把菜单先遍历出来\n    if (item.menuType == 1) {\n      var param = {\n        path: item.routeUrl,\n        name: item.menuName,\n        component: loadView(route.componentUrl),\n        props: JSON.stringify(item.param)\n      };\n      if (item.target == 1) {\n        children.push(param);\n      }\n      if (item.target == 0) {\n        routes.push(param);\n      }\n    }\n  });\n  root.children = children;\n  if (children.length > 0) {\n    root.redirect = children[0].routeUrl;\n  }\n  routes.push(root);\n  return routes;\n}\nexport const loadView = view => {\n  if (process.env.NODE_ENV === 'development') {\n    return resolve => require([`@/views${view}`], resolve);\n  } else {\n    // 使用 import 实现生产环境的路由懒加载\n    return () => import(`@/views${view}`);\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n};","map":{"version":3,"names":["getMenuByUser","el","state","activeMenuArrary","activeMenu","menus","routes","displayMenus","btnMenus","getters","getMenu","menu","getRoutes","getDisplayMenus","getBtnMenus","mutations","setActiveMenu","addActiveMenu","push","reduceActiveMenu","i","splice","setMenus","setRoutes","setDisplayMenus","setBtnMenus","btn","actions","generateRoutes","commit","Promise","resolve","then","res","code","data","filterRoutes","display","filterMenus","forEach","item","menuType","visible","parents","child","filterChildMenus","id","parentId","root","path","name","component","main","redirect","children","param","routeUrl","menuName","loadView","route","componentUrl","props","JSON","stringify","target","length","view","process","env","NODE_ENV","require","namespaced"],"sources":["D:/vue_project/back_stage_front/src/store/modules/menu.js"],"sourcesContent":["import { getMenuByUser } from '@/api/api'\r\nimport { el } from 'element-plus/es/locale'\r\nconst state = {\r\n  activeMenuArrary: [\r\n    {\r\n      \"name\": \"首页\",\r\n      \"url\": \"/index\"\r\n    }\r\n  ],\r\n  activeMenu: \"/index\",\r\n  menus: [],\r\n  routes: [],\r\n  displayMenus: [],\r\n  btnMenus: [],\r\n}\r\n\r\nconst getters ={\r\n  getMenu(state) {\r\n    return state.menu\r\n  },\r\n  getRoutes(state) {\r\n    return state.routes\r\n  },\r\n  getDisplayMenus(state) {\r\n    return state.displayMenus\r\n  },\r\n  getBtnMenus(state) {\r\n    return state.btnMenus\r\n  }\r\n}\r\n\r\nconst mutations = {\r\n  setActiveMenu(state,menu) {\r\n      state.activeMenu = menu\r\n  },\r\n  addActiveMenu(state,menu) {\r\n      state.activeMenuArrary.push(menu)\r\n  },\r\n  reduceActiveMenu(state,i) {\r\n      state.activeMenuArrary.splice(i,1)\r\n  },\r\n  setMenus(state,menus) {\r\n      state.menus = menus\r\n  },\r\n  setRoutes(state,routes) {\r\n    state.routes = routes\r\n  },\r\n  setDisplayMenus(state,menus) {\r\n    state.displayMenus = menus\r\n  },\r\n  setBtnMenus(state,btn) {\r\n    state.btnMenus = btn\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  generateRoutes({ commit }) {\r\n    return new Promise(resolve => {\r\n      //根据用户获取菜单权限\r\n      getMenuByUser().then(res => {\r\n        if(res.code == 1000) {\r\n          var data = res.data\r\n          commit(\"setMenus\",data)\r\n          //开始组装路由信息\r\n          var routes = filterRoutes(data)\r\n          commit(\"setRoutes\",routes)\r\n          //遍历获取首页左侧菜单\r\n          var display = filterMenus(data)\r\n          commit(\"displayMenus\",display)\r\n          //\r\n          resolve(routes)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nfunction filterMenus(menus) {\r\n  var menu = []\r\n  menus.forEach(item => {\r\n    //遍历一级菜单或目录\r\n    if(item.menuType != 2 && visible == 0 && !item.parents) {\r\n      //一级菜单去找自己的下级\r\n      item.child = []\r\n      if(item.menuType == 0) {\r\n        filterChildMenus(item,menus)\r\n      }\r\n      menu.push(item)\r\n    }\r\n  })\r\n}\r\n\r\nfunction filterChildMenus(menu,menus) {\r\n  menu.child = []\r\n  menus.forEach(item => {\r\n    if(menu.id == item.parentId) {\r\n      if(item.menuType == 0) {\r\n        filterChildMenus(item,menus)\r\n        menu.child.push(item)\r\n      } else if(item.menuType == 1) {\r\n        menu.child.push(item)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction filterRoutes(menus) {\r\n  var routes = []\r\n  var root = {\r\n    path: \"\",\r\n    name: 'main',\r\n    component: main,\r\n    redirect: '',\r\n    children: []\r\n  }\r\n  var children = []\r\n  //遍历出路由\r\n  menus.forEach(item => {\r\n    //把菜单先遍历出来\r\n    if(item.menuType == 1) {\r\n      var param = {\r\n        path: item.routeUrl,\r\n        name: item.menuName,\r\n        component: loadView(route.componentUrl),\r\n        props: JSON.stringify(item.param),\r\n      }\r\n      if(item.target == 1) {\r\n        children.push(param)\r\n      }\r\n      if(item.target == 0) {\r\n        routes.push(param)\r\n      }\r\n    }\r\n  });\r\n  root.children = children\r\n  if(children.length > 0) {\r\n    root.redirect = children[0].routeUrl\r\n  }\r\n  routes.push(root)\r\n  return routes;\r\n}\r\n\r\nexport const loadView = (view) => {\r\n  if (process.env.NODE_ENV === 'development') {\r\n    return (resolve) => require([`@/views${view}`], resolve)\r\n  } else {\r\n    // 使用 import 实现生产环境的路由懒加载\r\n    return () => import(`@/views${view}`)\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  mutations,\r\n  actions\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}