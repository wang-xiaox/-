{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { login, getUser } from '../../../api/api';\nimport { setLock } from '@/utils/lock';\nexport default {\n  data() {\n    return {\n      username: '',\n      password: ''\n    };\n  },\n  methods: {\n    login() {\n      if (!this.username) {\n        this.$message({\n          message: '请输入用户名',\n          type: 'warning'\n        });\n        return;\n      }\n      if (!this.password) {\n        this.$message({\n          message: '请输入密码',\n          type: 'warning'\n        });\n        return;\n      }\n      var params = {\n        username: this.username,\n        password: this.password\n      };\n      login(params).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '登陆成功',\n            type: 'success'\n          });\n          var that = this;\n          var token = res.data.token;\n          this.$store.commit('user/setToken', token);\n          this.getUserInfo();\n          setLock(false);\n          setTimeout(function () {\n            that.$router.push(\"/index\");\n          }, 500);\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n    getUserInfo() {\n      getUser().then(res => {\n        if (res.code == 1000) {\n          this.$store.commit('user/setUser', JSON.stringify(res.data));\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {}\n};","map":{"version":3,"names":["login","getUser","setLock","data","username","password","methods","$message","message","type","params","then","res","code","that","token","$store","commit","getUserInfo","setTimeout","$router","push","error","JSON","stringify","created","mounted"],"sources":["src/views/system/login/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-page\">\r\n    <div class=\"login\">\r\n        \r\n    </div>\r\n    <div class=\"content\">\r\n        <img style=\"width:249px;height:249px\" src=\"../../../assets/image/login.png\">\r\n        <div>ApePower</div>\r\n    </div>\r\n    <div class=\"login-card\">\r\n        <div class=\"login-title\">\r\n            <span>LogIn</span>\r\n        </div>\r\n        <div class=\"login-input\">\r\n            <div class=\"input-item\">\r\n                <el-input prefix-icon=\"el-icon-user\" v-model=\"username\" placeholder=\"请输入用户名\"></el-input>\r\n            </div>\r\n            <div class=\"input-item\">\r\n                <el-input prefix-icon=\"el-icon-lock\" placeholder=\"请输入密码\" v-model=\"password\" show-password></el-input>\r\n            </div>\r\n        </div>\r\n        <el-button class=\"login-btn\" type=\"primary\" @click=\"login()\">登陆</el-button>\r\n        <!-- <span class=\"forget\">Forgot your password?</span> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {login,getUser} from '../../../api/api' \r\n  import { setLock } from '@/utils/lock'\r\n  export default {\r\n    data() {\r\n      return{\r\n        username: '',\r\n        password: ''\r\n      }\r\n    },\r\n    methods: {\r\n        login() {\r\n            if(!this.username) {\r\n                this.$message({\r\n                    message: '请输入用户名',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            if(!this.password) {\r\n                this.$message({\r\n                    message: '请输入密码',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            var params = {\r\n                username: this.username,\r\n                password: this.password\r\n            }\r\n            login(params).then(res => {\r\n                if(res.code == 1000) {\r\n                    this.$message({\r\n                        message: '登陆成功',\r\n                        type: 'success'\r\n                    });\r\n                    var that = this\r\n                    var token = res.data.token\r\n                    this.$store.commit('user/setToken', token)\r\n                    this.getUserInfo()\r\n                    setLock(false)\r\n                    setTimeout(function() {\r\n                        that.$router.push(\"/index\")\r\n                    },500)\r\n                } else {\r\n                    this.$message.error(res.message);\r\n                }\r\n            })\r\n        },\r\n        getUserInfo() {\r\n            getUser().then(res => {\r\n                if(res.code == 1000) {\r\n                    this.$store.commit('user/setUser', JSON.stringify(res.data))\r\n                }\r\n            })\r\n        },\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      \r\n    }\r\n }\r\n</script>\r\n\r\n<style lang=scss scoped>\r\n  .login-page {\r\n      position: relative;\r\n      width: 100%;\r\n      height: 100%;\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      align-items: center;\r\n  }\r\n  .login {\r\n    position: absolute;\r\n    height: 2000px;\r\n    width: 2000px;\r\n    top:10%;\r\n    right: 48%;\r\n    transform: translateY(-50%);\r\n    background-image: linear-gradient(-45deg,#4481eb 0,#04befe 100%);\r\n    transition: 1.8s ease-in-out;\r\n    border-radius: 50%;\r\n  }\r\n  .content {\r\n      position: absolute;\r\n      top: 25%;\r\n      left: 15%;\r\n      text-align: center;\r\n      color:#000000;font-size:25px;font-weight:bold\r\n  }\r\n  .title {\r\n      height: 10%;\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: 20px;\r\n      color: #fff;\r\n      font-weight: bold;\r\n  }\r\n  .login-card {\r\n      margin-right: 10%;\r\n      width: 35%;\r\n      height: 60%;\r\n      background-color: #ffffff;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n  }\r\n  .login-title {\r\n      height:20%;\r\n      color:#000000;\r\n      font-weight:bold;\r\n      font-size:30px;\r\n      display:flex;\r\n      align-items: center\r\n  }\r\n  .login-input {\r\n      width:70%;\r\n      height:40%\r\n  }\r\n  .forget {\r\n      margin-top: 6%;\r\n      color:#C4C3CA;font-weight:bold;font-size:15px;\r\n  }\r\n  .forget:hover {\r\n      color: #FDE9A6;\r\n  }\r\n  .login-btn {\r\n      margin-top: 3%;\r\n      border-radius: 50px;\r\n      width:120px;\r\n      height: 46px;\r\n      font-weight: bold;\r\n      font-family: '黑体';\r\n      font-size: 17px;\r\n  }\r\n  .login-btn:hover {\r\n      background-color: #102770;\r\n      color: #FDE9A6;\r\n      font-weight: bold;\r\n      font-family: '黑体';\r\n      font-size: 17px;\r\n      border: none;\r\n  }\r\n  .el-input ::v-deep .el-input__inner {\r\n    border-radius: 50px;\r\n    font-weight: bold;\r\n    background-color: #F0F0F0;\r\n    height: 50px;\r\n  }\r\n  .input-item {\r\n      display: flex;\r\n      margin-top:20px;\r\n      align-items: center;\r\n  }\r\n</style>"],"mappings":";AA4BA,SAAAA,KAAA,EAAAC,OAAA;AACA,SAAAC,OAAA;AACA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAN,MAAA;MACA,UAAAI,QAAA;QACA,KAAAG,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,UAAAJ,QAAA;QACA,KAAAE,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,IAAAC,MAAA;QACAN,QAAA,OAAAA,QAAA;QACAC,QAAA,OAAAA;MACA;MACAL,KAAA,CAAAU,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAN,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,IAAAK,IAAA;UACA,IAAAC,KAAA,GAAAH,GAAA,CAAAT,IAAA,CAAAY,KAAA;UACA,KAAAC,MAAA,CAAAC,MAAA,kBAAAF,KAAA;UACA,KAAAG,WAAA;UACAhB,OAAA;UACAiB,UAAA;YACAL,IAAA,CAAAM,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAd,QAAA,CAAAe,KAAA,CAAAV,GAAA,CAAAJ,OAAA;QACA;MACA;IACA;IACAU,YAAA;MACAjB,OAAA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAG,MAAA,CAAAC,MAAA,iBAAAM,IAAA,CAAAC,SAAA,CAAAZ,GAAA,CAAAT,IAAA;QACA;MACA;IACA;EACA;EACAsB,QAAA,GAEA;EACAC,QAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}