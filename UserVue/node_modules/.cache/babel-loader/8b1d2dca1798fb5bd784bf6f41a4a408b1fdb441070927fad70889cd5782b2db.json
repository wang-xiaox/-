{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { login, getUser } from '../../api/api';\nexport default {\n  data() {\n    return {\n      loginAccount: \"\",\n      password: \"\"\n    };\n  },\n  methods: {\n    toRegister() {\n      this.$router.push(\"/register\");\n    },\n    toForget() {\n      this.$router.push(\"/forget\");\n    },\n    login() {\n      if (!this.loginAccount) {\n        this.$message({\n          message: '请输入用户名',\n          type: 'warning'\n        });\n        return;\n      }\n      if (!this.password) {\n        this.$message({\n          message: '请输入密码',\n          type: 'warning'\n        });\n        return;\n      }\n      var params = {\n        loginAccount: this.loginAccount,\n        password: this.password\n      };\n      login(params).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '登陆成功',\n            type: 'success'\n          });\n          var that = this;\n          var token = res.data.token;\n          window.localStorage.setItem(\"user_token\", token);\n          this.getUserInfo();\n          setTimeout(function () {\n            that.$router.push(\"/\");\n          }, 500);\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n    getUserInfo() {\n      getUser().then(res => {\n        if (res.code == 1000) {\n          window.localStorage.setItem(\"user_info\", JSON.stringify(res.data));\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {}\n};","map":{"version":3,"names":["login","getUser","data","loginAccount","password","methods","toRegister","$router","push","toForget","$message","message","type","params","then","res","code","that","token","window","localStorage","setItem","getUserInfo","setTimeout","error","JSON","stringify","created","mounted"],"sources":["src/views/logIn/logIn.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"login1\">\r\n        <div class=\"login2\">\r\n            欢迎光临\r\n        </div>\r\n        <div class=\"login3\">\r\n            惠聚新鲜好菜,乐享品质生活。\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {login,getUser} from '../../api/api'\r\n  export default {\r\n    data() {\r\n      return{\r\n        loginAccount: \"\",\r\n        password: \"\",\r\n      }\r\n    },\r\n    methods: {\r\n        toRegister() {\r\n          this.$router.push(\"/register\")\r\n        },\r\n        toForget() {\r\n          this.$router.push(\"/forget\")\r\n        },\r\n        login() {\r\n            if(!this.loginAccount) {\r\n                this.$message({\r\n                    message: '请输入用户名',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            if(!this.password) {\r\n                this.$message({\r\n                    message: '请输入密码',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            var params = {\r\n                loginAccount: this.loginAccount,\r\n                password: this.password\r\n            }\r\n            login(params).then(res => {\r\n                if(res.code == 1000) {\r\n                    this.$message({\r\n                        message: '登陆成功',\r\n                        type: 'success'\r\n                    });\r\n                    var that = this\r\n                    var token = res.data.token\r\n                    window.localStorage.setItem(\"user_token\",token)\r\n                    this.getUserInfo()\r\n                    setTimeout(function() {\r\n                        that.$router.push(\"/\")\r\n                    },500)\r\n                } else {\r\n                    this.$message.error(res.message);\r\n                }\r\n            })\r\n        },\r\n        getUserInfo() {\r\n            getUser().then(res => {\r\n                if(res.code == 1000) {\r\n\t\t\t\t\t          window.localStorage.setItem(\"user_info\",JSON.stringify(res.data))\r\n                }\r\n            })\r\n        },\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      \r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n  @import url('../../assets/css/login.css');\r\n</style>"],"mappings":";AAcA,SAAAA,KAAA,EAAAC,OAAA;AACA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,SAAA;MACA,KAAAF,OAAA,CAAAC,IAAA;IACA;IACAR,MAAA;MACA,UAAAG,YAAA;QACA,KAAAO,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,UAAAR,QAAA;QACA,KAAAM,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACA,IAAAC,MAAA;QACAV,YAAA,OAAAA,YAAA;QACAC,QAAA,OAAAA;MACA;MACAJ,KAAA,CAAAa,MAAA,EAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAN,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,IAAAK,IAAA;UACA,IAAAC,KAAA,GAAAH,GAAA,CAAAb,IAAA,CAAAgB,KAAA;UACAC,MAAA,CAAAC,YAAA,CAAAC,OAAA,eAAAH,KAAA;UACA,KAAAI,WAAA;UACAC,UAAA;YACAN,IAAA,CAAAV,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAE,QAAA,CAAAc,KAAA,CAAAT,GAAA,CAAAJ,OAAA;QACA;MACA;IACA;IACAW,YAAA;MACArB,OAAA,GAAAa,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAG,MAAA,CAAAC,YAAA,CAAAC,OAAA,cAAAI,IAAA,CAAAC,SAAA,CAAAX,GAAA,CAAAb,IAAA;QACA;MACA;IACA;EACA;EACAyB,QAAA,GAEA;EACAC,QAAA,GAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}